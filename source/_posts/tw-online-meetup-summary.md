---
title: 思沃特训营线上讨论总结
layout: post
cdn: header-on
date: 2017-08-14 09:45:40
tags:
    - Javascript
    - 个人随笔
---

昨天晚上和小组内的成员一起进行了一次线上的讨论，各自对在做任务的过程中的思路和代码进行展示和讲解，讨论了三个半小时还多，收获颇多，在此总结一下。

## 代码实践方面

1. 命名问题，不要贪图短，注意语义化
 * 我觉得命名问题的大原则就是**语义化**，不要图短，可以采用动词+名词的方法进行命名。
 * 其中对于变量和函数建议用**驼峰命名法**，且首字母要小写。但是对于类名，首字母一般约定为大写。如：`new Student()`和`let totalNumber;`或者`function getNumeById(){...}`这样。
 * 对于CSS中类的命名建议用**BEM**的方法命名，具体的可以网上查一查，简单来说就是将CSS类命名模块化，一个模块就是一个**Block**，里面有不同的元素（**Element**），对于元素可以加上不同的修饰，（**Modifier**）,之间可以用`__`（双下划线）连接。
> 分享一篇文章：[常用html、CSS、javascript前端命名规范](https://my.oschina.net/lianyi/blog/48955)

2. If/else 或者 for的代码块不要太多

代码中嵌套的if/else结构往往导致代码不美观，也不易于理解，可读性降低。因此建议在代码中应该尽量减少if/else的使用次数（不绝对）。
分享几个具体减少的方法：
* `if(a === true){ a=a } else { a=b }` 就可以直接写为`a = a || b;`
*  `if(a === b){ a=b } else { a=c }` 就可以直接写为`a = a===b ? b : c;`
* 在进行`if/else`的判断时，有时候可以使用判断`false`来提前返回，这样就可以将正常的逻辑不写在`if/else`代码块里面了。比如：
```
if(a){
  // do something…
}
```
就可以写为
```
if(!a) return; 
// do something…
```
这样看起来就会更加清晰一点。
* 在写`if/else`的逻辑的时候，可以把发生的概率最大的情况写在最前面，这样可以减少程序判断的次数。比如：
```
if (i < 5) {
    // do something...
 } else if (i > 5 && i < 10) {
    // do something...
 } else {
    // do something...
 }
```
在这个情况中，如果`i`的值出现大约10的次数或几率比较大，那么这么写`if/else`就不是最好的，因为会多出两次无故的判断，就可以先判断`if( i > 10)`再进行后面的判断。
* `switch/case`和`if/else`在性能发面和可读性方面并没有什么区别，所以不要企图通过`switch/case`替换`if/else`来优化代码。它们两个有各自不同的使用场景，`switch/case`更适合分支比较多的情况，而`if/else`更适合条件分支较少的情况。
* 可以适当运用一些面向对象的方法，比如动物叫的问题。（不同的动物会发出不同的叫声）。比如：
```
function getBark(type) {
    if (type === 'dog') {
        return 'wang wang';
    } else if (type === 'cat') {
        return 'mow mow';
    } else if (type === 'flog'){
        return 'gua gua';
    }
}
```
就可以进行抽象和提取，将其中不同动物的叫声提取出来，在进行判断就好。如下：
```
const barkType = {
  'dog' : 'wang wang',
  'cat' : 'mow mow',
  'flog' : 'gua gua'
};
function getBark(type){
  return barkType[type];
}
```
这样做有两个好处：
*  假如我们需要加入新的动物及其叫声，只需要为`barkType`添加一行就可以了，便于拓展；
*  `getBark`函数是封装好的，在添加新的动物叫声的时候，该方法可以完全保持不动。

3. 参数不要太多，如果想要传的参数很多，可以使用对象来传参数
忘记是哪里看到的了，说是函数的参数不要太多，建议不要超过四个。否则可能会带来一些问题，比如：在传参的时候少传了，参数的顺序写错，会产生不可预料的错误。如果是我的话，在对函数要传递很多参数的时候，我会将参数封装为对象，比如：
```
// too many arguments...
function getInfo(name, age, class, grade, salary){...}
// simple argument...
let person = {
  name: '...',
  age: '...',
  class: '...',
  salary: '...'
};
function getInfo(person){...}
```
这样做就不要担心参数的顺序问题了，只要我们需要的值都在`person`对象中，我们写在第几个都是可以正常的调用到的。

4. 要将大函数切分为小而精的函数，提高代码的可重用性。比如：
	* loadItem不一定要全要，因为不一定我什么东西都买
	* 对于不同的优惠种类给予不同的输出函数

这样做既满足了对于函数的单一职责原则，又可以大大增大代码的可重用性，因此是由必要对代码的函数进行合理的切分的。引用我之前的一个分享。
> 文章中提到作者所写的函数大部分函数都是小于10行的，有一些函数甚至只有一两行代码。
> 在函数短的时候，势必会造成函数调用数量的增加，这时可能会担心函数调用对内存等的占用问题。但作者提到，是不会的。因为现在的编译器和解释器对于小的函数能够更好的进行缓存，以此来提高程序运行效率，因此并不会有很多额外的开销。
> 相反，在写函数的时候，如何赋予函数一个语义化的名字才是事关重要的。比如：判断一个数组为空，我们可以直接判断if(arr.length === 0)，但这样看上去更像是说这个数组的长度是零么，不如直接声明一个函数function isEmptyArr(arr){return arr.length === 0;}，这样再去调用该函数的时候，就可以从函数名中得知我们是在判断一个数组是否为空。
> 最好的状态就是在读代码的时候，感觉像是在读故事一样。

（这一点也是自己需要再加强的，捂脸。。）

5. 代码格式化（对齐问题）
这一点我认为也是比较重要的，如果一段代码的格式比较乱，我认为会极大的影响代码的可读性，很有可能会把大括号的层级给搞错，产生不必要的麻烦。
关于代码的格式规范，个人认为是没有必须的统一的要求，通常都是以一个公司或者企业内部会有一套代码规范，然后企业内部的员工就同意遵循这个规范就好。如果自己的话，其实挺好解决，几乎所有的编辑器都有代码格式化的功能，只要查到你所用的编辑器的代码格式化的快捷键，时不时的格式化一下就好。

6. 适当添加注释
今天好像看到大家比较少的添加注释，包括我自己在内。记得之前看过文章说，如果你的代码中有太多注释，证明你的代码的自表达性不好，就是没有特别好的语义化的命名，让人一看就能明白是什么意思。因此建议是适当的注释，如果这块逻辑比较复杂，建议还是添加上注释比较好，其实很多时候注释都是写给自己看的，我觉得很多时候当我们回过头看自己的代码的时候，如果没有注释，自己也是会看不懂的。


## JS语法方面的问题
1. JSON相关
其实我觉得JSON就是对象（key-value对，键值对），有两个比较重要的方法，`JSON.parse()`方法将满足对象格式的字符串转化为JSON对象，以及`JSON.stringify()`方法将JSON对象转换为字符串。通过使用`JSON.parse(JSON.stringify(obj))`是可以完成一个对象的深拷贝的。
更集体的介绍可以看这里。→ [JSON介绍](http://www.w3school.com.cn/json/json_intro.asp)
3. 关于对象的深拷贝和浅拷贝
简单来说就是一个是传值一个是传递引用（内存地址）。浅复制只会将对象的各个属性进行依次复制，并不会进行递归复制，而 JavaScript 存储对象都是存地址的，所以浅复制会导致拷贝前后两个变量指向同一块内存地址；深复制则不同，它不仅将原对象的各个属性逐个复制出去，而且将原对象各个属性所包含的对象也依次采用深复制的方法递归复制到新对象上，这样拷贝前后的两个变量就指向不同的地址，就不会发生改变拷贝之后的变量，拷贝之前的变量的值也变了的情况了。
更详细的可以看一下这里知乎的讨论。 → [javascript中的深拷贝和浅拷贝?](https://www.zhihu.com/question/23031215)
5. ES6
ES6发布已经出来有些年头了，并且在内部又封装了很多很实用的方法，其实是可以大胆的使用的，具体的ES6的内容一两句也说不完，就不具体说了，想学习的话是可以看阮一峰老师的ES6教程，写的很不错。→ [ECMAScript 6教程](http://es6.ruanyifeng.com/)。对了，还有我之前做了关于ES6的语法总结，也可以看下，嘿嘿~ [ES6常用语法总结](http://xujin.pro/2017-08-07-summary-of-es6-syntax.html)

END 💯

一起加油吧！👍